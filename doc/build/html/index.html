<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spice &mdash; spice 1.7_RC documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> spice
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Spice</a></li>
<li><a class="reference internal" href="#spice-module">Spice Module</a></li>
<li><a class="reference internal" href="#spice-io-file">Spice IO-file</a></li>
<li><a class="reference internal" href="#spice-simulation-command">Spice Simulation Command</a></li>
<li><a class="reference internal" href="#spice-dc-source">Spice DC Source</a></li>
<li><a class="reference internal" href="#spice-testbench">Spice Testbench</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">spice</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
      <li>Spice</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="toctree-wrapper compound">
</div>
<span class="target" id="module-spice"></span><div class="section" id="spice">
<h1>Spice<a class="headerlink" href="#spice" title="Permalink to this headline"></a></h1>
<p>Analog simulation interface package for The System Development Kit</p>
<p>Provides utilities to import spice-like modules to python environment and
automatically generate testbenches for the most common simulation cases.</p>
<p>Initially written by Okko Järvinen, 2019</p>
<p>Release 1.6, Jun 2020 supports Eldo and Spectre</p>
<dl class="py class">
<dt class="sig sig-object py" id="spice.spice">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">spice.</span></span><span class="sig-name descname"><span class="pre">spice</span></span><a class="reference internal" href="_modules/spice.html#spice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice" title="Permalink to this definition"></a></dt>
<dd><p>Adding this class as a superclass enforces the definitions
for Spice simulations in the subclasses.</p>
<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.connect_spice_inputs">
<span class="sig-name descname"><span class="pre">connect_spice_inputs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.connect_spice_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.connect_spice_inputs" title="Permalink to this definition"></a></dt>
<dd><p>Automatically called function to connect iofiles (inputs) to top
entity IOS Bundle items.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.connect_spice_outputs">
<span class="sig-name descname"><span class="pre">connect_spice_outputs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.connect_spice_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.connect_spice_outputs" title="Permalink to this definition"></a></dt>
<dd><p>Automatically called function to connect iofiles (outputs) to top
entity IOS Bundle items.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.dcsource_bundle">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dcsource_bundle</span></span><a class="headerlink" href="#spice.spice.dcsource_bundle" title="Permalink to this definition"></a></dt>
<dd><p>A thesdk.Bundle containing spice_dcsource objects. The dcsource objects
are automatically added to this Bundle, nothing should be manually
added.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.distributed_run">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">distributed_run</span></span><a class="headerlink" href="#spice.spice.distributed_run" title="Permalink to this definition"></a></dt>
<dd><p>Boolean (default False)
If True, distributes applicable simulations (currently DC sweep supported)
into the LSF cluster. The number of subprocesses launched is
set by self.num_processes.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.dspf">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dspf</span></span><a class="headerlink" href="#spice.spice.dspf" title="Permalink to this definition"></a></dt>
<dd><p>List&lt;String&gt;</p>
<p>List containing filenames for DSPF-files to be included for post-layout
simulations. The names given in this list are matched to dspf-files in
‘./spice/’ -directory. A postfix ‘.pex.dspf’ is automatically appended
to the given names (this will probably change later).</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">dspf</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;inv_v2&#39;</span><span class="p">,</span><span class="s1">&#39;switch_v3&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>would include files ‘./spice/inv_v2.pex.dspf’ and
‘./spice/switch_v3.pex.dspf’ as dspf-files in the testbench. If the
dspf-file contains definition matching the original design name of the
top-level netlist, it gets also renamed to match the module name
(dspf-file for top-level instance is possible).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.eldochisrc">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">eldochisrc</span></span><a class="headerlink" href="#spice.spice.eldochisrc" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Path to the Eldo chi-file. (‘./Simulations/spicesim/&lt;runname&gt;/tb_entityname.chi’).
Only applies to Eldo simulations.
This shouldn’t be set manually.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.entitypath">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">entitypath</span></span><a class="headerlink" href="#spice.spice.entitypath" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Path to the entity root.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.errpreset">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">errpreset</span></span><a class="headerlink" href="#spice.spice.errpreset" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Global accuracy parameter for Spectre simulations. Options include
‘liberal’, ‘moderate’ and ‘conservative’, in order of rising
accuracy.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.execute_spice_sim">
<span class="sig-name descname"><span class="pre">execute_spice_sim</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.execute_spice_sim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.execute_spice_sim" title="Permalink to this definition"></a></dt>
<dd><p>Automatically called function to execute spice simulation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.extract_powers">
<span class="sig-name descname"><span class="pre">extract_powers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.extract_powers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.extract_powers" title="Permalink to this definition"></a></dt>
<dd><p>Automatically called function to extract transient power and current
consumptions. The consumptions are extracted for spice_dcsource objects
with the attribute extract=True.</p>
<p>The extracted consumptions are accessible on the top-level after simulation as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">extracts</span><span class="o">.</span><span class="n">Members</span><span class="p">[</span><span class="s1">&#39;powers&#39;</span><span class="p">]</span> <span class="c1"># Dictionary with averaged power consumptions of each supply + total</span>
<span class="bp">self</span><span class="o">.</span><span class="n">extracts</span><span class="o">.</span><span class="n">Members</span><span class="p">[</span><span class="s1">&#39;currents&#39;</span><span class="p">]</span> <span class="c1"># Dictionary with averaged current consumptions of each supply + total</span>
<span class="bp">self</span><span class="o">.</span><span class="n">extracts</span><span class="o">.</span><span class="n">Members</span><span class="p">[</span><span class="s1">&#39;curr_tran&#39;</span><span class="p">]</span> <span class="c1"># Dictionary with transient current consumptions of each supply</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.extracts">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">extracts</span></span><a class="headerlink" href="#spice.spice.extracts" title="Permalink to this definition"></a></dt>
<dd><p>A thesdk.Bundle containing extracted quantities.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.get_buswidth">
<span class="sig-name descname"><span class="pre">get_buswidth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signame</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.get_buswidth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.get_buswidth" title="Permalink to this definition"></a></dt>
<dd><p>Extract buswidth from signal name.</p>
<p>Little-endian example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start</span><span class="p">,</span><span class="n">stop</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="nb">range</span> <span class="o">=</span> <span class="n">get_buswidth</span><span class="p">(</span><span class="s1">&#39;BUS&lt;10:0&gt;&#39;</span><span class="p">)</span>
<span class="c1"># start = 10</span>
<span class="c1"># stop = 0</span>
<span class="c1"># width = 11</span>
<span class="c1"># range = range(10,-1,-1)</span>
</pre></div>
</div>
<p>Big-endian example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start</span><span class="p">,</span><span class="n">stop</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="nb">range</span> <span class="o">=</span> <span class="n">get_buswidth</span><span class="p">(</span><span class="s1">&#39;BUS&lt;0:8&gt;&#39;</span><span class="p">)</span>
<span class="c1"># start = 0</span>
<span class="c1"># stop = 8</span>
<span class="c1"># width = 9</span>
<span class="c1"># range = range(0,9)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.has_lsf">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">has_lsf</span></span><a class="headerlink" href="#spice.spice.has_lsf" title="Permalink to this definition"></a></dt>
<dd><p>Returs True if LSF submissions are properly defined. Default False</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.interactive_spice">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">interactive_spice</span></span><a class="headerlink" href="#spice.spice.interactive_spice" title="Permalink to this definition"></a></dt>
<dd><p>True | False (default)</p>
<p>Launch simulator in interactive mode. For Eldo, opens also ezwave.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.iofile_bundle">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">iofile_bundle</span></span><a class="headerlink" href="#spice.spice.iofile_bundle" title="Permalink to this definition"></a></dt>
<dd><p>A thesdk.Bundle containing spice_iofile objects. The iofile objects
are automatically added to this Bundle, nothing should be manually
added.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.iofile_eventdict">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">iofile_eventdict</span></span><a class="headerlink" href="#spice.spice.iofile_eventdict" title="Permalink to this definition"></a></dt>
<dd><p>Dictionary to store event type output from spectre simulations. This should speed up reading the results.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.load_state">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">load_state</span></span><a class="headerlink" href="#spice.spice.load_state" title="Permalink to this definition"></a></dt>
<dd><p>String (Default ‘’)</p>
<p>Feature for loading results of previous simulation.  The Spice
simulation is not re-executed, but the outputs will be read from
existing files.</p>
<p>Example inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">load_state</span> <span class="o">=</span> <span class="s1">&#39;last&#39;</span> <span class="c1"># load latest</span>
<span class="bp">self</span><span class="o">.</span><span class="n">load_state</span> <span class="o">=</span> <span class="s1">&#39;latest&#39;</span> <span class="c1"># load latest</span>
<span class="bp">self</span><span class="o">.</span><span class="n">load_state</span> <span class="o">=</span> <span class="s1">&#39;20201002103638_tmpdbw11nr4&#39;</span> <span class="c1"># load results matching this name</span>
<span class="bp">self</span><span class="o">.</span><span class="n">load_state</span> <span class="o">=</span> <span class="s1">&#39;zzzz&#39;</span> <span class="p">(</span><span class="n">non</span><span class="o">-</span><span class="n">existent</span> <span class="n">directory</span><span class="p">)</span> <span class="c1"># list available directories to load</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.name">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#spice.spice.name" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Name of the module.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.nproc">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">nproc</span></span><a class="headerlink" href="#spice.spice.nproc" title="Permalink to this definition"></a></dt>
<dd><p>Integer</p>
<p>Requested maximum number of threads for multithreaded simulations. For
Eldo, maps to command line parameter ‘-nproc’. For Spectre, maps to
command line parameter ‘+mt’.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.num_processes">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">num_processes</span></span><a class="headerlink" href="#spice.spice.num_processes" title="Permalink to this definition"></a></dt>
<dd><p>integer
Maximum number of spawned child processes for distributed runs.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.plotlist">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">plotlist</span></span><a class="headerlink" href="#spice.spice.plotlist" title="Permalink to this definition"></a></dt>
<dd><p>OBSOLETE! RE-LOCATED TO SPICE_SIMCMD.PY</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.plotprogcmd">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">plotprogcmd</span></span><a class="headerlink" href="#spice.spice.plotprogcmd" title="Permalink to this definition"></a></dt>
<dd><p>Sets the command to be run for interactive simulations.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.plotprogram">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">plotprogram</span></span><a class="headerlink" href="#spice.spice.plotprogram" title="Permalink to this definition"></a></dt>
<dd><p>Sets the program to be used for visualizing waveform databases.
Options are ezwave (default) or viva.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.preserve_iofiles">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">preserve_iofiles</span></span><a class="headerlink" href="#spice.spice.preserve_iofiles" title="Permalink to this definition"></a></dt>
<dd><p>True | False (default)</p>
<p>If True, do not delete file IO files after simulations. Useful for
debugging the file IO</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.preserve_result">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">preserve_result</span></span><a class="headerlink" href="#spice.spice.preserve_result" title="Permalink to this definition"></a></dt>
<dd><p>True | False (default)</p>
<p>If True, do not delete result files after simulations.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.preserve_spicefiles">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">preserve_spicefiles</span></span><a class="headerlink" href="#spice.spice.preserve_spicefiles" title="Permalink to this definition"></a></dt>
<dd><p>True | False (default)</p>
<p>If True, do not delete generated Spice files (testbench, subcircuit,
etc.) after simulations.  Useful for debugging.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.read_oppts">
<span class="sig-name descname"><span class="pre">read_oppts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.read_oppts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.read_oppts" title="Permalink to this definition"></a></dt>
<dd><p>Internally called function to read the DC operating points of the circuit
TODO: Implement for Eldo as well.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.read_spice_outputs">
<span class="sig-name descname"><span class="pre">read_spice_outputs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.read_spice_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.read_spice_outputs" title="Permalink to this definition"></a></dt>
<dd><p>Automatically called function to call read() functions of each
iofile with direction ‘output’.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.run_plotprogram">
<span class="sig-name descname"><span class="pre">run_plotprogram</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.run_plotprogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.run_plotprogram" title="Permalink to this definition"></a></dt>
<dd><p>Starting a parallel process for waveform viewer program.</p>
<p>The plotting program command can be set with ‘plotprogram’.
Tested for spectre and eldo.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.run_spice">
<span class="sig-name descname"><span class="pre">run_spice</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.run_spice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.run_spice" title="Permalink to this definition"></a></dt>
<dd><p>Externally called function to execute spice simulation.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.runname">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">runname</span></span><a class="headerlink" href="#spice.spice.runname" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Automatically generated name for the simulation.</p>
<p>Formatted as timestamp_randomtag, i.e. ‘20201002103638_tmpdbw11nr4’.
Can be overridden by assigning self.runname = ‘myname’.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">runname</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>
</pre></div>
</div>
<p>would generate the simulation files in <cite>Simulations/spicesim/test/</cite>.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.si_prefix_mult">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">si_prefix_mult</span></span><a class="headerlink" href="#spice.spice.si_prefix_mult" title="Permalink to this definition"></a></dt>
<dd><p>Dictionary mapping SI-prefixes to multipliers</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.si_string_to_float">
<span class="sig-name descname"><span class="pre">si_string_to_float</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strval</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.si_string_to_float"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.si_string_to_float" title="Permalink to this definition"></a></dt>
<dd><p>Convert SI-formatted string to float</p>
<p>E.g. self.si_string_to_float(‘3 mV’) returns 3e-3.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.simcmd_bundle">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">simcmd_bundle</span></span><a class="headerlink" href="#spice.spice.simcmd_bundle" title="Permalink to this definition"></a></dt>
<dd><p>A thesdk.Bundle containing spice_simcmd objects. The simcmd objects
are automatically added to this Bundle, nothing should be manually
added.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spice_submission">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spice_submission</span></span><a class="headerlink" href="#spice.spice.spice_submission" title="Permalink to this definition"></a></dt>
<dd><p>Defines spice submission prefix from thesdk.GLOBALS[‘LSFSUBMISSION’]
and thesdk.GLOBALS[‘LSFINTERACTIVE’] for LSF submissions.</p>
<p>Usually something like ‘bsub -K’ and ‘bsub -I’.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spicecmd">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spicecmd</span></span><a class="headerlink" href="#spice.spice.spicecmd" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Simulation command string to be executed on the command line.
Automatically generated.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spicecorner">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spicecorner</span></span><a class="headerlink" href="#spice.spice.spicecorner" title="Permalink to this definition"></a></dt>
<dd><p>Dictionary</p>
<p>Feature for specifying the ‘section’ of the model library file and
simulation temperature. The path to model libraries should be set in
TheSDK.config as either ELDOLIBFILE, SPECTRELIBFILE or NGSPICELIBFILE variable.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">spicecorner</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;temp&#39;</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
        <span class="s1">&#39;corner&#39;</span><span class="p">:</span> <span class="s1">&#39;top_tt&#39;</span>
        <span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spicedbpath">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spicedbpath</span></span><a class="headerlink" href="#spice.spice.spicedbpath" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Path to output waveform database. (./Simulations/spicesim/&lt;runname&gt;/tb_&lt;entityname&gt;.&lt;resultfile_ext&gt;)
For now only for spectre.
This shouldn’t be set manually.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spicemisc">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spicemisc</span></span><a class="headerlink" href="#spice.spice.spicemisc" title="Permalink to this definition"></a></dt>
<dd><p>List&lt;String&gt;</p>
<p>List of manual commands to be pasted to the testbench. The strings are
pasted to their own lines (no linebreaks needed), and the syntax is
unchanged.</p>
<p>Example: setting initial voltages from testbench (Eldo):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">spicemisc</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nodes</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">spicemisc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;.ic NODE&lt;</span><span class="si">%d</span><span class="s1">&gt; 0&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spiceoptions">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spiceoptions</span></span><a class="headerlink" href="#spice.spice.spiceoptions" title="Permalink to this definition"></a></dt>
<dd><p>Dictionary</p>
<p>Feature for specifying options for spice simulation. The key is the
name of the option (as in simulator manual specifies), and the value is
the value given to said option. Valid key-value pairs can be found from
the manual of the simulator (Eldo, Spectre or Ngspice).</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">spiceoptions</span> <span class="o">=</span> <span class="p">{</span>
           <span class="s1">&#39;save&#39;</span><span class="p">:</span> <span class="s1">&#39;lvlpub&#39;</span><span class="p">,</span>
           <span class="s1">&#39;nestlvl&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
           <span class="s1">&#39;pwr&#39;</span><span class="p">:</span> <span class="s1">&#39;subckts&#39;</span><span class="p">,</span>
           <span class="s1">&#39;digits&#39;</span><span class="p">:</span> <span class="s1">&#39;12&#39;</span>
       <span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spiceparameters">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spiceparameters</span></span><a class="headerlink" href="#spice.spice.spiceparameters" title="Permalink to this definition"></a></dt>
<dd><p>Dictionary</p>
<p>Feature for specifying simulation parameters for spice simulation. The
key is the name of the parameter , and the value is the value given to
said parameter.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">spiceparameters</span> <span class="o">=</span> <span class="p">{</span>
           <span class="s1">&#39;nf_pmos&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
           <span class="s1">&#39;nf_nmos&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
           <span class="s1">&#39;ibias&#39;</span><span class="p">:</span> <span class="mf">100e-6</span>
       <span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spicesimpath">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spicesimpath</span></span><a class="headerlink" href="#spice.spice.spicesimpath" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Simulation path. (./Simulations/spicesim/&lt;runname&gt;)
This shouldn’t be set manually.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spicesrc">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spicesrc</span></span><a class="headerlink" href="#spice.spice.spicesrc" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Path to the source netlist (i.e. ‘spice/entityname.scs’).
This shouldn’t be set manually.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Provided netlist name has to match entity name (entityname.scs or entityname.cir).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Netlist has to contain the top-level design as a subcircuit definition.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spicesrcpath">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spicesrcpath</span></span><a class="headerlink" href="#spice.spice.spicesrcpath" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Path to the spice source of the entity (‘./spice’).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spicesubcktsrc">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spicesubcktsrc</span></span><a class="headerlink" href="#spice.spice.spicesubcktsrc" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Path to the parsed subcircuit file. (‘./Simulations/spicesim/&lt;runname&gt;/subckt_entityname.&lt;suffix&gt;’).
This shouldn’t be set manually.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.spicetbsrc">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">spicetbsrc</span></span><a class="headerlink" href="#spice.spice.spicetbsrc" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Path to the spice testbench (‘./Simulations/spicesim/&lt;runname&gt;/tb_entityname.&lt;suffix&gt;’).
This shouldn’t be set manually.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice.syntaxdict">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">syntaxdict</span></span><a class="headerlink" href="#spice.spice.syntaxdict" title="Permalink to this definition"></a></dt>
<dd><p>Internally used dictionary for common syntax conversions between
Spectre, Eldo, and Ngspice.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice.write_spice_inputs">
<span class="sig-name descname"><span class="pre">write_spice_inputs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice.html#spice.write_spice_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice.write_spice_inputs" title="Permalink to this definition"></a></dt>
<dd><p>Automatically called function to call write() functions of each
iofile with direction ‘input’.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-spice.spice_module"></span><div class="section" id="spice-module">
<h1>Spice Module<a class="headerlink" href="#spice-module" title="Permalink to this headline"></a></h1>
<p>Class for Spice netlist parsing.</p>
<dl class="py class">
<dt class="sig sig-object py" id="spice.spice_module.spice_module">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">spice.spice_module.</span></span><span class="sig-name descname"><span class="pre">spice_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_module.html#spice_module"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_module.spice_module" title="Permalink to this definition"></a></dt>
<dd><p>This class parses source netlist for subcircuits and handles the generation
of a separate pruned subckt_* -file. This class is internally utilized by
the spice_testbench module.</p>
<dl class="py property">
<dt class="sig sig-object py" id="spice.spice_module.spice_module.name">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#spice.spice_module.spice_module.name" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Entity name.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice_module.spice_module.postlayout">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">postlayout</span></span><a class="headerlink" href="#spice.spice_module.spice_module.postlayout" title="Permalink to this definition"></a></dt>
<dd><p>Boolean</p>
<p>Flag for detected post-layout netlists. This will enable post-layout
optimizations in the simulator command options. Automatically detected
from given netlist for Calibre extracted netlists, or when ‘dspf’
attribute is defined.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice_module.spice_module.subckt">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">subckt</span></span><a class="headerlink" href="#spice.spice_module.spice_module.subckt" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>String containing the contents of the subckt_* -file. This attribute
parses the source netlist when called, and generates the contents to be
written to the subckt-file.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice_module.spice_module.subinst">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">subinst</span></span><a class="headerlink" href="#spice.spice_module.spice_module.subinst" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>String containing the subcircuit instance to be placed in the
testbench. The instance is parsed from the previously generated
subckt_* -file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice_module.spice_module.subinst_constructor">
<span class="sig-name descname"><span class="pre">subinst_constructor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_module.html#spice_module.subinst_constructor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_module.spice_module.subinst_constructor" title="Permalink to this definition"></a></dt>
<dd><p>Method that parses the subcircuit definition and
constructs a subcircuit instance out of it</p>
<blockquote>
<div><p>subckt : string</p>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-spice.spice_iofile"></span><div class="section" id="spice-io-file">
<h1>Spice IO-file<a class="headerlink" href="#spice-io-file" title="Permalink to this headline"></a></h1>
<p>Provides spice file IO related attributes and methods
for TheSDK spice.</p>
<p>Initially written by Okko Järvinen, 2020</p>
<dl class="py class">
<dt class="sig sig-object py" id="spice.spice_iofile.spice_iofile">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">spice.spice_iofile.</span></span><span class="sig-name descname"><span class="pre">spice_iofile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_iofile.html#spice_iofile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_iofile.spice_iofile" title="Permalink to this definition"></a></dt>
<dd><p>Class to provide file IO for spice simulations. When created,
adds a spice_iofile object to the parents iofile_bundle property.
Accessible as iofile_bundle.Members[‘name’].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><em>object</em></a>) – The parent object initializing the spice_iofile instance. Default None</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of the IO.</p></li>
<li><p><strong>dir</strong> (<em>'in'</em><em> or </em><em>'out'</em>) – Direction of the IO.</p></li>
<li><p><strong>iotype</strong> (<em>'event'</em><em>, </em><em>'sample'</em><em> or </em><em>'time'</em>) – Type of the IO signal. Event type signals are time-value pairs (analog
signal), whereas sample type signals are sampled by a clock signal
(digital bus). Sample type signals can be used for discrete time &amp;
continuous amplitude outputs (sampled voltage for example), by setting
iotype=’sample’ and ioformat=’volt’. Time type signals return a vector
of timestamps corresponding to threshold crossings.</p></li>
<li><p><strong>ioformat</strong> (<em>'dec'</em><em>, </em><em>'bin'</em><em> or </em><em>'volt'</em>) – Formatting of the sampled signals. Digital output buses are formatted
to unsigned integers when ioformat = ‘dec’. For ‘bin’, the digital
output bus is returned as a string containing ones and zeros. When
ioformat = ‘volt’, the output signal is sampled at the clock and the
floating point value is returned. Voltage sampling is only supported
for non-bus signals.</p></li>
<li><p><strong>sourcetype</strong> (<em>'V'</em><em>, </em><em>'I'</em><em> or </em><em>'ISUB'</em>) – Type of the source associated to a file. Default ‘V’.</p></li>
<li><p><strong>datatype</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Inherited from the parent. If complex, the ioname is handled as a
complex signal. Currently implemented only for writing the ouputs in
testbenches and reading them in.</p></li>
<li><p><strong>trigger</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em> or </em><em>list&lt;str&gt;</em>) – Name of the clock signal node in the Spice netlist. If a single string
is given, the same clock signal is used for all bits/buses. If a list
is given, and the length matches ionames list length, each ioname will
be assigned its own clock. Applies only to sample type outputs.</p></li>
<li><p><strong>vth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Threshold voltage of the trigger signal and the bit rounding. Applies
only to sample type outputs.</p></li>
<li><p><strong>edgetype</strong> (<em>'rising'</em><em>, </em><em>'falling'</em><em> or </em><em>'both'</em>) – Type of triggering edge. When time type signal is used, the edgetype
values can define the extraction type as ‘risetime’ or ‘falltime’
additionally. Default ‘rising’.</p></li>
<li><p><strong>after</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Initial delay added to the input signal (sample) or time extraction
(time). Useful for ignoring inital settling, for example. Applies only
to sample and time outputs. Default 0.</p></li>
<li><p><strong>big_endian</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – Flag to read the extracted bus as big-endian. Applies only to sample
type outputs. Default False.</p></li>
<li><p><strong>rs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Sample rate of the sample type input. Default None.</p></li>
<li><p><strong>vhi</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – High bit value of sample type input. Default 1.0.</p></li>
<li><p><strong>vlo</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Low bit value of sample type input. Default 0.</p></li>
<li><p><strong>tfall</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Falltime of sample type input. Default 5e-12.</p></li>
<li><p><strong>trise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Risetime of sample type input. Default 5e-12.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Initiated in parent as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_iofile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foobar&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Defining analog input voltage signals from python to spice:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_iofile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inp&#39;</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">,</span><span class="n">iotype</span><span class="o">=</span><span class="s1">&#39;event&#39;</span><span class="p">,</span><span class="n">sourcetype</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span><span class="n">ionames</span><span class="o">=</span><span class="s1">&#39;INP&#39;</span><span class="p">)</span>
<span class="n">_</span><span class="o">=</span><span class="n">spice_iofile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inn&#39;</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">,</span><span class="n">iotype</span><span class="o">=</span><span class="s1">&#39;event&#39;</span><span class="p">,</span><span class="n">sourcetype</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span><span class="n">ionames</span><span class="o">=</span><span class="s1">&#39;INN&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Defining time-domain output signal containing rising edge threshold
crossing timestamps of an analog clock signal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_iofile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;clk_rise&#39;</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;out&#39;</span><span class="p">,</span><span class="n">iotype</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span><span class="n">sourcetype</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span>
               <span class="n">ionames</span><span class="o">=</span><span class="s1">&#39;CLK&#39;</span><span class="p">,</span><span class="n">edgetype</span><span class="o">=</span><span class="s1">&#39;rising&#39;</span><span class="p">,</span><span class="n">vth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vdd</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Defining digital output signal triggered with a falling edge of the analog clock:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_iofile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;dout&#39;</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;out&#39;</span><span class="p">,</span><span class="n">iotype</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span><span class="n">sourcetype</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span><span class="n">ioformat</span><span class="o">=</span><span class="s1">&#39;bin&#39;</span><span class="p">,</span>
               <span class="n">ionames</span><span class="o">=</span><span class="s1">&#39;DOUT&lt;7:0&gt;&#39;</span><span class="p">,</span><span class="n">edgetype</span><span class="o">=</span><span class="s1">&#39;falling&#39;</span><span class="p">,</span><span class="n">vth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vdd</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">trigger</span><span class="o">=</span><span class="s1">&#39;CLK&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Defining a discrete time &amp; continuous amplitude output signal triggered
with a rising edge of the analog clock. The iofile returns a 2D-vector
similar to ‘event’ type signals:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_iofile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sampled_input&#39;</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;out&#39;</span><span class="p">,</span><span class="n">iotype</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span><span class="n">sourcetype</span><span class="o">=</span><span class="s1">&#39;V&#39;</span><span class="p">,</span><span class="n">ioformat</span><span class="o">=</span><span class="s1">&#39;volt&#39;</span><span class="p">,</span>
               <span class="n">ionames</span><span class="o">=</span><span class="s1">&#39;INP&#39;</span><span class="p">,</span><span class="n">edgetype</span><span class="o">=</span><span class="s1">&#39;rising&#39;</span><span class="p">,</span><span class="n">vth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vdd</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">trigger</span><span class="o">=</span><span class="s1">&#39;CLK&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Defining digital input signal with decimal format. The input vector is a
list of integers, which get converted to binary bus of 4-bits (inferred
from ‘CTRL&lt;3:0&gt;’). The values are changed at 1 MHz interval in this
example.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_iofile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ctrl&#39;</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">,</span><span class="n">iotype</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span><span class="n">ionames</span><span class="o">=</span><span class="s1">&#39;CTRL&lt;3:0&gt;&#39;</span><span class="p">,</span><span class="n">rs</span><span class="o">=</span><span class="mf">1e6</span><span class="p">,</span>
               <span class="n">vhi</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">vdd</span><span class="p">,</span><span class="n">trise</span><span class="o">=</span><span class="mf">5e-12</span><span class="p">,</span><span class="n">tfall</span><span class="o">=</span><span class="mf">5e-12</span><span class="p">,</span><span class="n">ioformat</span><span class="o">=</span><span class="s1">&#39;dec&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="spice.spice_iofile.spice_iofile.append_to_data">
<span class="sig-name descname"><span class="pre">append_to_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buswidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_iofile.html#spice_iofile.append_to_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_iofile.spice_iofile.append_to_data" title="Permalink to this definition"></a></dt>
<dd><p>Helper method to append array to self.Data.</p>
<p>The array(s) are padded with np.nan when bits=False, and ‘UUUU’ when
bits=True. This is called automatically for time and sample type IOs.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice_iofile.spice_iofile.file">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">file</span></span><a class="headerlink" href="#spice.spice_iofile.spice_iofile.file" title="Permalink to this definition"></a></dt>
<dd><p>List&lt;str&gt;</p>
<p>List containing filepaths to files associated with this spice_iofile.
For digital buses or arrays of signals, the list contains multiple
files which are automatically handled together. These filepaths are set
automatically.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice_iofile.spice_iofile.interp_crossings">
<span class="sig-name descname"><span class="pre">interp_crossings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edgetype</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_iofile.html#spice_iofile.interp_crossings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_iofile.spice_iofile.interp_crossings" title="Permalink to this definition"></a></dt>
<dd><p>Helper method called for ‘time’ and ‘sample’ type outputs.</p>
<p>Interpolates the requested threshold crossings (rising or falling) from
the ‘event’ type input signal. Returns the time-stamps of the crossing
instants in a 1D-vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – Input data array. Expected an ‘event’ type 2D-vector where first
column is time and second is voltage.</p></li>
<li><p><strong>vth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Threshold voltage.</p></li>
<li><p><strong>nint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Interpolation factor. The two closest points on each side of a
threshold crossing are used for linear interpolation endpoints,
where nint points are added to find as close x-value of the
threshold crossing as possible.</p></li>
<li><p><strong>edgetype</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Direction of the crossing: ‘rising’, ‘falling’ or ‘both’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>1D-vector with time-stamps of interpolated threshold crossings.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.spice_iofile.spice_iofile.ionames">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">ionames</span></span><a class="headerlink" href="#spice.spice_iofile.spice_iofile.ionames" title="Permalink to this definition"></a></dt>
<dd><p>List&lt;str&gt;</p>
<p>Set by argument ‘ionames’. This property casts the given argument to a
list if needed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice_iofile.spice_iofile.parse_io_from_file">
<span class="sig-name descname"><span class="pre">parse_io_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_iofile.html#spice_iofile.parse_io_from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_iofile.spice_iofile.parse_io_from_file" title="Permalink to this definition"></a></dt>
<dd><p>Parse specific lines from a spectre print file.</p>
<p>This is wrapped to a function to allow parallelism.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice_iofile.spice_iofile.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_iofile.html#spice_iofile.read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_iofile.spice_iofile.read" title="Permalink to this definition"></a></dt>
<dd><p>Function to read files associated with this spice_iofile.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice_iofile.spice_iofile.sample_signal">
<span class="sig-name descname"><span class="pre">sample_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trigger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_iofile.html#spice_iofile.sample_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_iofile.spice_iofile.sample_signal" title="Permalink to this definition"></a></dt>
<dd><p>Helper method called for ‘sample’ type outputs.</p>
<p>Finds the signal y-values at time instants defined by the clock signal
(trigger).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – Input data array. Expected an ‘event’ type 2D-vector where first
column is time and second is voltage.</p></li>
<li><p><strong>vth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Threshold voltage.</p></li>
<li><p><strong>nint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Interpolation factor. The two closest points on each side of a
threshold crossing are used for linear interpolation endpoints,
where nint points are added to find as close x-value of the
threshold crossing as possible.</p></li>
<li><p><strong>edgetype</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Direction of the crossing: ‘rising’, ‘falling’ or ‘both’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>1D-vector with time-stamps of interpolated threshold crossings.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.spice_iofile.spice_iofile.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_iofile.html#spice_iofile.write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_iofile.spice_iofile.write" title="Permalink to this definition"></a></dt>
<dd><p>Function to write files associated with this spice_iofile.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-spice.spice_simcmd"></span><div class="section" id="spice-simulation-command">
<h1>Spice Simulation Command<a class="headerlink" href="#spice-simulation-command" title="Permalink to this headline"></a></h1>
<p>Class for spice simulation commands.</p>
<p>Initially written by Okko Järvinen, 9.1.2020</p>
<dl class="py class">
<dt class="sig sig-object py" id="spice.spice_simcmd.spice_simcmd">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">spice.spice_simcmd.</span></span><span class="sig-name descname"><span class="pre">spice_simcmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_simcmd.html#spice_simcmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_simcmd.spice_simcmd" title="Permalink to this definition"></a></dt>
<dd><p>Class to provide simulation command parameters to spice testbench.
When instantiated in the parent class, this class automatically
attaches spice_simcmd objects to simcmd_bundle -bundle in testbench.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><em>object</em></a>) – The parent object initializing the spice_simcmd instance. Default None.</p></li>
<li><p><strong>sim</strong> (<em>'tran'</em><em> or </em><em>'dc'</em>) – Simulation type.</p></li>
<li><p><strong>plotlist</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>)</em>) – <p>List of node names or operating points to be plotted. Node names follow
simulator syntax.  For Eldo, the voltage/current specifier is expected:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">plotlist</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;v(OUT)&#39;</span><span class="p">,</span><span class="s1">&#39;v(CLK)&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>For Spectre, the node name is enough:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">plotlist</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;OUT&#39;</span><span class="p">,</span><span class="s1">&#39;CLK&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Below applies only for Spectre!</p>
</div>
<p>When capturing operating point information with Spectre, adding the
instance name to plotlist saves all operating points for the device,
e.g:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">plotlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">XTB_NAME</span><span class="o">.</span><span class="n">XSUBCKT</span><span class="o">/</span><span class="n">M0</span><span class="p">]</span>
</pre></div>
</div>
<p>saves all operating points defined by the model for the device M0 in
subckt XSUBCKT.</p>
<p>Wildcards are supported, but should be used with caution as the output
file can quickly become excessively large. For example to capture the
gm of all transistor use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">plotlist</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="p">:</span><span class="n">gm</span><span class="p">]</span>
</pre></div>
</div>
<p>It is highly recommended to exclude the devices that are not needed
from the output to reduce file size. Examples of such devices are
RC-parasitics (include option ‘savefilter=rc’ in self.spiceoptions to
exclude them) and dummy transistors. See exclude_list below.</p>
</p></li>
<li><p><strong>excludelist</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em>(</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>)</em>) – <p>Applies for Spectre only! List of device names NOT to be included in
the output report. Wildcards are supported. Exclude list is especially
useful for DC simulations when specifiying outputs with wildcards.</p>
<p>For example, when capturing gm for all transistors, use exclude list to
exclude all dummy transistors with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">excludelist</span> <span class="o">=</span> <span class="p">[</span><span class="n">XTB_NAME</span><span class="o">*</span><span class="n">DUMMY_ID</span><span class="o">*</span><span class="p">],</span>
</pre></div>
</div>
<p>where DUMMY_ID is extraction tool / runset specific dummy identifier.</p>
</p></li>
<li><p><strong>sweep</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – <p>DC &amp; Spectre models only. If given, sweeps the top-level parameter
given as value. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_spice_simcmd</span><span class="p">(</span><span class="n">sim</span><span class="o">=</span><span class="s1">&#39;dc&#39;</span><span class="p">,</span><span class="n">sweep</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">swpstart</span><span class="o">=</span><span class="mi">27</span><span class="p">,</span><span class="n">swpstop</span><span class="o">=</span><span class="mi">87</span><span class="p">)</span>
</pre></div>
</div>
<p>sweeps the top-level parameter temp (temperature) from 27 to 87 at 10
degree increments.</p>
</p></li>
<li><p><strong>subcktname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – <p>If given, sweeps the parameter defined by property sweep from the
subcircuit given by this property. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_simcmd</span><span class="p">(</span><span class="n">sim</span><span class="o">=</span><span class="s1">&#39;dc&#39;</span><span class="p">,</span><span class="n">sweep</span><span class="o">=</span><span class="s1">&#39;Vb&#39;</span><span class="p">,</span><span class="n">subcktname</span><span class="o">=</span><span class="s1">&#39;XSUBCKT&#39;</span><span class="p">,</span>
               <span class="n">swpstart</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span><span class="n">swpstop</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span><span class="n">step</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
</pre></div>
</div>
<p>sweeps the Vb parameter from subcircuit XSUBCKT from 0.1 volts to 1.5
volts with 0.05 volt increments.</p>
</p></li>
<li><p><strong>devname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – <p>If given, sweeps the parameter defined by property sweep from the
device given by this property. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_simcmd</span><span class="p">(</span><span class="n">sim</span><span class="o">=</span><span class="s1">&#39;dc&#39;</span><span class="p">,</span> <span class="n">sweep</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">deviceswp</span><span class="o">=</span><span class="s1">&#39;XSUBCKT.XNMOS&#39;</span><span class="p">,</span>
               <span class="n">swpstart</span><span class="o">=</span><span class="mi">10</span><span class="n">u</span><span class="p">,</span> <span class="n">swpstop</span><span class="o">=</span><span class="mi">14</span><span class="n">u</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="n">u</span><span class="p">)</span>
</pre></div>
</div>
<p>sweeps the width of transistor XNMOS of subckt XSUBCKT from 10u to 14u
in 0.1u increments.</p>
</p></li>
<li><p><strong>swpstart</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Starting point of DC sweep. Default 0.</p></li>
<li><p><strong>swpstop</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Stop point of DC sweep. Default 0.</p></li>
<li><p><strong>swpstep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Step size of the sweep simulation. Default 10.</p></li>
<li><p><strong>tprint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Print interval. Default ‘1p’ or 1e-12.</p></li>
<li><p><strong>tstop</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Transient simulation duration. When not defined, the simulation time is
the duration of the longest input signal.</p></li>
<li><p><strong>uic</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – Use initial conditions flag. Default False.</p></li>
<li><p><strong>noise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – Noise transient flag. Default False.</p></li>
<li><p><strong>fmin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Minimum noise frequency. Default 1 (Hz).</p></li>
<li><p><strong>fmax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Maximum noise frequency. Default 5e9.</p></li>
<li><p><strong>fscale</strong> (<em>'log'</em><em> or </em><em>'lin'</em>) – Logarithmic or linear scale for frequency. Default ‘log’.</p></li>
<li><p><strong>fpoints</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Number of points for frequency analysis. Default 0.</p></li>
<li><p><strong>fstepsize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Step size for AC analysis, if scale if ‘lin’. If fscale is ‘log’, this
parameter gives number of points per decade. Default 0.</p></li>
<li><p><strong>seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Random generator seed for noise transient. Default None (random).</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Transient integration method. Default None (Spectre takes
method from errpreset).</p></li>
<li><p><strong>cmin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Spectre cmin parameter: this much cap from each node to ground.
Might speed up simulation. Default None (not used).</p></li>
<li><p><strong>mc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – Enable Monte Carlo simulation. This flag will enable Monte Carlo
modeling for a single simulation. It will NOT execute multiple runs
or do any statistical analysis. Intended use case is to generate a
group of entities in TheSyDeKick with each having mc=True,
simulating them in parallel (see run_parallel() of thesdk-class),
post-processing results in TheSyDeKick.</p></li>
<li><p><strong>mc_seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – Random seed for the Monte Carlo instance. Default None (random seed).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Initiated in parent as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_simcmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="s1">&#39;tran&#39;</span><span class="p">,</span><span class="n">tprint</span><span class="o">=</span><span class="mf">1e-12</span><span class="p">,</span><span class="n">tstop</span><span class="o">=</span><span class="s1">&#39;10n&#39;</span><span class="p">,</span>
               <span class="n">uic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">noise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">fmin</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">fmax</span><span class="o">=</span><span class="mf">5e9</span><span class="p">)</span>
</pre></div>
</div>
<p>For a simple transient with inferred simulation duration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_simcmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sim</span><span class="o">=</span><span class="s1">&#39;tran&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<span class="target" id="module-spice.spice_dcsource"></span><div class="section" id="spice-dc-source">
<h1>Spice DC Source<a class="headerlink" href="#spice-dc-source" title="Permalink to this headline"></a></h1>
<p>Class for generating DC voltage/current sources in the Spectre or Eldo
testbench.</p>
<p>Initially written by Okko Järvinen, 9.1.2020</p>
<dl class="py class">
<dt class="sig sig-object py" id="spice.spice_dcsource.spice_dcsource">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">spice.spice_dcsource.</span></span><span class="sig-name descname"><span class="pre">spice_dcsource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/spice_dcsource.html#spice_dcsource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.spice_dcsource.spice_dcsource" title="Permalink to this definition"></a></dt>
<dd><p>Class to provide DC source definitions to spice testbench.  When
instantiated in the parent class, this class automatically attaches
spice_dcsource objects to dcsource_bundle -bundle in testbench.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><em>object</em></a>) – The parent object initializing the spice_dcsource instance. Default
None.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of the source.</p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Value of the source.</p></li>
<li><p><strong>sourcetype</strong> (<em>'V'</em><em> or </em><em>'I'</em>) – Type of the DC source. Either ‘V’ for voltage or ‘I’ for current.</p></li>
<li><p><strong>pos</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of the positive net in the netlist.</p></li>
<li><p><strong>neg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of the negative net in the netlist.</p></li>
<li><p><strong>extract</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – Flag the source for transient current and power consumption extraction.
Extracted currents and powers are accessible through dictionaries
self.currents and self.powers in the parent object. Default False.</p></li>
<li><p><strong>ext_start</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Time to start extracting average transient power consumption. Default
is 0.</p></li>
<li><p><strong>ext_stop</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Time to stop extracting average transient power consumption. Default
is simulation end time.</p></li>
<li><p><strong>noise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – Enable the noise contribution of this source (only when transient noise
is enabled). Default is True.</p></li>
<li><p><strong>ramp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Ramp up the source from 0 to value in ramp seconds. Default is 0 (no
ramping).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>A voltage source connected between circuit nodes ‘VDD’ and ‘VSS’, for which
power and current consumptions are extracted in transient simulation.
Initiated in parent as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_dcsource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;supply&#39;</span><span class="p">,</span><span class="n">value</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">extract</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">pos</span><span class="o">=</span><span class="s1">&#39;VDD&#39;</span><span class="p">,</span><span class="n">neg</span><span class="o">=</span><span class="s1">&#39;VSS&#39;</span><span class="p">)</span>
<span class="n">_</span><span class="o">=</span><span class="n">spice_dcsource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ground&#39;</span><span class="p">,</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">pos</span><span class="o">=</span><span class="s1">&#39;VSS&#39;</span><span class="p">,</span><span class="n">neg</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span> <span class="c1"># Ground &#39;source&#39;</span>
</pre></div>
</div>
<p>A bias current flowing from ‘VDD’ to node ‘IBIAS’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="o">=</span><span class="n">spice_dcsource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;bias&#39;</span><span class="p">,</span><span class="n">sourcetype</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">,</span><span class="n">value</span><span class="o">=</span><span class="mf">25e-6</span><span class="p">,</span><span class="n">pos</span><span class="o">=</span><span class="s1">&#39;VDD&#39;</span><span class="p">,</span><span class="n">neg</span><span class="o">=</span><span class="s1">&#39;IBIAS&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="spice.spice_dcsource.spice_dcsource.ext_file">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">ext_file</span></span><a class="headerlink" href="#spice.spice_dcsource.spice_dcsource.ext_file" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Optional filepath for extracted transient current when
self.extract=True.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-spice.testbench"></span><div class="section" id="spice-testbench">
<h1>Spice Testbench<a class="headerlink" href="#spice-testbench" title="Permalink to this headline"></a></h1>
<p>Testbench generation class for spice simulations.</p>
<dl class="py class">
<dt class="sig sig-object py" id="spice.testbench.testbench">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">spice.testbench.</span></span><span class="sig-name descname"><span class="pre">testbench</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/testbench.html#testbench"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.testbench.testbench" title="Permalink to this definition"></a></dt>
<dd><p>This class generates all testbench contents.
This class is utilized by the main spice class.</p>
<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.dcsourcestr">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dcsourcestr</span></span><a class="headerlink" href="#spice.testbench.testbench.dcsourcestr" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>DC source definitions parsed from spice_dcsource objects instantiated
in the parent entity.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.dspfincludecmd">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dspfincludecmd</span></span><a class="headerlink" href="#spice.testbench.testbench.dspfincludecmd" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>DSPF-file inclusion string pointing to files corresponding to self.dspf
in the parent entity.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.testbench.testbench.esc_bus">
<span class="sig-name descname"><span class="pre">esc_bus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">esc_colon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/testbench.html#testbench.esc_bus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.testbench.testbench.esc_bus" title="Permalink to this definition"></a></dt>
<dd><p>Helper function to escape bus characters for Spectre simulations
bus&lt;3:0&gt; –&gt; bus&lt;3:0&gt;.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.testbench.testbench.export">
<span class="sig-name descname"><span class="pre">export</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/testbench.html#testbench.export"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.testbench.testbench.export" title="Permalink to this definition"></a></dt>
<dd><p>Internally called function to write the testbench to a file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.testbench.testbench.export_subckt">
<span class="sig-name descname"><span class="pre">export_subckt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/testbench.html#testbench.export_subckt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.testbench.testbench.export_subckt" title="Permalink to this definition"></a></dt>
<dd><p>Internally called function to write the parsed subcircuit definitions
to a file.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.file">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">file</span></span><a class="headerlink" href="#spice.testbench.testbench.file" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Filepath to the testbench file (i.e. ‘./spice/tb_entityname.scs’).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spice.testbench.testbench.generate_contents">
<span class="sig-name descname"><span class="pre">generate_contents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spice/testbench.html#testbench.generate_contents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spice.testbench.testbench.generate_contents" title="Permalink to this definition"></a></dt>
<dd><p>Internally called function to generate testbench contents.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.includecmd">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">includecmd</span></span><a class="headerlink" href="#spice.testbench.testbench.includecmd" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Subcircuit inclusion string pointing to generated subckt_* -file.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.inputsignals">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">inputsignals</span></span><a class="headerlink" href="#spice.testbench.testbench.inputsignals" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Input signal definitions parsed from spice_iofile objects instantiated
in the parent entity.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.libcmd">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">libcmd</span></span><a class="headerlink" href="#spice.testbench.testbench.libcmd" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Library inclusion string. Parsed from self.spicecorner -dictionary in
the parent entity, as well as ‘ELDOLIBFILE’ or ‘SPECTRELIBFILE’ global
variables in TheSDK.config.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.misccmd">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">misccmd</span></span><a class="headerlink" href="#spice.testbench.testbench.misccmd" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Miscellaneous command string corresponding to self.spicemisc -list in
the parent entity.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.options">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">options</span></span><a class="headerlink" href="#spice.testbench.testbench.options" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Spice options string parsed from self.spiceoptions -dictionary in the
parent entity.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.parameters">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">parameters</span></span><a class="headerlink" href="#spice.testbench.testbench.parameters" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Spice parameters string parsed from self.spiceparameters -dictionary in
the parent entity.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.plotcmd">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">plotcmd</span></span><a class="headerlink" href="#spice.testbench.testbench.plotcmd" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>All output IOs are mapped to plot or print statements in the testbench.
Also manual plot commands through spice_simcmd.plotlist are handled here.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="spice.testbench.testbench.simcmdstr">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">simcmdstr</span></span><a class="headerlink" href="#spice.testbench.testbench.simcmdstr" title="Permalink to this definition"></a></dt>
<dd><p>String</p>
<p>Simulation command definition parsed from spice_simcmd object
instantiated in the parent entity.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019 TheSyDeKick Community.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>